# F10d.4 Fix reflection_query Search

**Phase**: 10d - Bug Fixes & Cleanup
**Priority**: Medium
**Dependencies**: None

## Problem

`reflection_query` returns empty results even for reflections just stored via `reflection_store`. The search uses `content LIKE '%query%'` which requires the exact substring. Multi-word queries like "context query" don't match content containing "context_query" (underscore) or words separated by other text.

### Root Cause

`message-store.ts search()` does `WHERE content LIKE ?` with `%${query}%` as a single substring match. This fails when:
- Query has spaces but content has underscores: "context query" vs "context_query"
- Words appear in different parts of the content

## Implementation

### File: `src/conversation/message-store.ts`

Split multi-word queries into individual terms and match each with AND logic:
- Split on whitespace, underscores, hyphens
- Build `WHERE content LIKE '%term1%' AND content LIKE '%term2%'`

## Success Criteria

- Store a reflection containing "context_query returns empty"
- Query with "context query" matches the stored reflection
- Query with "empty results" also matches
