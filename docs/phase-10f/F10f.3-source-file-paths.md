# F10f.3 Fix Source File Paths in Context Output

**Phase**: 10f - Retrieval Quality
**Priority**: Medium
**Dependencies**: None

## Problem

The source attribution table in `ctx-sys context` output shows `-` for every file:

```
Type          Name                    Relevance   File
------------------------------------------------------
class         EmbeddingManager        54%         -
function      generateEmbeddings      54%         -
class         MockEmbeddingProvider   54%         -
```

Code entities HAVE file paths (they come from AST parsing), but the paths aren't making it through to the display.

### Root Cause: Property Name Mismatch

There are two `ContextSource` interfaces with different property names:

1. **ContextAssembler** (`src/retrieval/context-assembler.ts:15-22`):
   ```typescript
   export interface ContextSource {
     file?: string;      // Uses 'file'
     line?: number;
   }
   ```

2. **Service types** (`src/services/types.ts:110-117`):
   ```typescript
   export interface ContextSource {
     filePath?: string;  // Uses 'filePath'
     line?: number;
   }
   ```

3. **CLI display** (`src/cli/context.ts:152`):
   ```typescript
   { header: 'File', key: 'filePath', ... }  // Looks for 'filePath'
   ```

The assembler sets `file`, the CLI reads `filePath` â€” they never match.

## Implementation

### Option A: Rename in assembler (preferred)

**File**: `src/retrieval/context-assembler.ts`

1. Change the interface (line ~19):
   ```typescript
   filePath?: string;  // Was: file
   ```

2. Change where it's set (line ~264):
   ```typescript
   filePath: result.entity.filePath,  // Was: file
   ```

3. Change where it's read in markdown rendering (line ~521):
   ```typescript
   const loc = source.filePath
     ? `${source.filePath}${source.line ? `:${source.line}` : ''}`
     : source.type;
   ```

### Option B: Remove duplicate interface

Delete `ContextSource` from `context-assembler.ts` and import it from `services/types.ts`. This is cleaner but may require updating the assembler's internal usage throughout the file.

## Expected Result After Fix

```
Type          Name                    Relevance   File
------------------------------------------------------
class         EmbeddingManager        54%         src/embeddings/manager.ts
function      generateEmbeddings      54%         src/cli/embeddings.ts
class         MockEmbeddingProvider   54%         src/embeddings/mock.ts
document      F10.2-incremental-...   69%         -
```

Code entities show their file path. Document entities still show `-` (they don't have file paths, which is correct).

## Success Criteria

- Code entities show file paths in source table
- Document entities still show `-` (no filePath is correct)
- Both CLI and MCP return consistent `filePath` property
