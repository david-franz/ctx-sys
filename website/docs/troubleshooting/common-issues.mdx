---
title: Common Issues
sidebar_position: 1
description: Solutions to common ctx-sys problems
---

# Troubleshooting Common Issues

This guide helps resolve the most common issues with ctx-sys.

## Installation Issues

### "Command not found: ctx-sys"

The npm global bin directory is not in your PATH.

**Solution:**

```bash
# Find the npm global bin path
npm bin -g

# Add to your shell config (~/.bashrc, ~/.zshrc, or ~/.profile)
export PATH="$(npm bin -g):$PATH"

# Reload your shell
source ~/.bashrc  # or ~/.zshrc
```

### "EACCES: permission denied"

npm doesn't have permission to install globally.

**Solution (Option 1 - Recommended):**

Use a Node version manager like nvm:

```bash
# Install nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Install latest Node
nvm install node

# Now install ctx-sys
npm install -g ctx-sys
```

**Solution (Option 2):**

Change npm's global directory:

```bash
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
npm install -g ctx-sys
```

## Ollama Issues

### "Ollama not found"

ctx-sys cannot connect to Ollama.

**Check if Ollama is installed:**

```bash
ollama --version
```

**If not installed:**

```bash
# macOS/Linux
curl https://ollama.ai/install.sh | sh

# Start Ollama
ollama serve
```

**Check if Ollama is running:**

```bash
curl http://localhost:11434/api/tags
```

### "Model not found"

The embedding or summarization model is not downloaded.

**Solution:**

```bash
# Pull the default embedding model
ollama pull nomic-embed-text

# Pull the default summarization model
ollama pull qwen3:0.6b

# Verify they're available
ollama list
```

### "Ollama is slow"

Embeddings or summarization are taking too long.

**Solutions:**

1. **Use a smaller model:**
   ```yaml
   embeddings:
     model: all-minilm
   ```

2. **Use GPU (if available):**
   Ollama automatically uses GPU when available. Ensure CUDA/Metal is properly configured.

## Indexing Issues

### "Indexing takes too long"

Large codebases can take time to index initially.

**Solutions:**

1. **Exclude unnecessary files:**
   ```yaml
   indexing:
     ignore:
       - node_modules
       - dist
       - "**/*.min.js"
       - vendor
   ```

2. **Index incrementally from git:**
   ```bash
   # Index only files changed since last sync
   ctx-sys sync
   ```

3. **Use watch mode for updates:**
   ```bash
   ctx-sys watch
   ```

### "Out of memory during indexing"

Large files or too many files cause memory issues.

**Solutions:**

1. **Exclude large files via ignore patterns**

2. **Index in batches using git sync:**
   ```bash
   ctx-sys sync
   ```

### "Some files not being indexed"

Files might be excluded or in an unsupported format.

**Supported languages (via tree-sitter):**
- TypeScript/JavaScript
- Python

**Supported document formats:**
- Markdown (.md)
- YAML (.yaml, .yml)
- JSON (.json)
- TOML (.toml)
- Plain text (.txt)

## Claude Desktop Issues

### "Server not found"

Claude Desktop cannot start ctx-sys.

**Verify installation:**

```bash
which ctx-sys
ctx-sys --version
```

**Check config path:**

```bash
# macOS
cat ~/Library/Application\ Support/Claude/claude_desktop_config.json
```

**Verify config format:**

```json
{
  "mcpServers": {
    "ctx-sys": {
      "command": "ctx-sys",
      "args": ["serve"],
      "env": {}
    }
  }
}
```

### "No tools available"

Claude Desktop connected but shows no ctx-sys tools.

**Solutions:**

1. **Restart Claude Desktop completely** (quit and reopen)

2. **Check the project is initialized:**
   ```bash
   ctx-sys status
   # If not initialized:
   ctx-sys init
   ctx-sys index
   ```

3. **Check server output:**
   ```bash
   ctx-sys serve
   ```

### "Context seems wrong/outdated"

ctx-sys is returning stale information.

**Solutions:**

1. **Re-index the project:**
   ```bash
   ctx-sys index --force
   ```

2. **Sync from git:**
   ```bash
   ctx-sys sync
   ```

3. **Reset database:**
   ```bash
   rm .ctx-sys/ctx-sys.db
   ctx-sys index
   ```

## Database Issues

### "Database locked"

Multiple processes trying to access the database.

**Solutions:**

1. **Stop other ctx-sys instances:**
   ```bash
   # Find and kill other processes
   ps aux | grep ctx-sys
   kill <pid>
   ```

2. **Remove stale WAL files:**
   ```bash
   rm .ctx-sys/ctx-sys.db-wal
   rm .ctx-sys/ctx-sys.db-shm
   ```

### "Database corrupted"

Database file is damaged.

**Solution:**

```bash
# Backup old database
mv .ctx-sys/ctx-sys.db .ctx-sys/ctx-sys.db.bak

# Re-create
ctx-sys index
```

## Performance Issues

### "Queries are slow"

Context retrieval takes too long.

**Solutions:**

1. **Reduce token budget:**
   ```yaml
   retrieval:
     default_max_tokens: 2000
   ```

2. **Use fewer search strategies:**
   ```yaml
   retrieval:
     strategies:
       - fts
       - vector
   ```

3. **Generate embeddings** (enables semantic search):
   ```bash
   ctx-sys embed
   ```

### "High memory usage"

ctx-sys using too much RAM.

**Solutions:**

1. **Reduce the number of indexed files** via ignore patterns

2. **Use incremental indexing** instead of full re-index

## Getting Help

If these solutions don't work:

1. **Run health check:**
   ```bash
   ctx-sys health
   ```

2. **Report issues:**
   [GitHub Issues](https://github.com/davidfranz/ctx-sys/issues)
