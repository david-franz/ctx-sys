---
title: Claude Desktop Integration
sidebar_position: 1
description: Connect ctx-sys to Claude Desktop for enhanced coding assistance
---

# Claude Desktop Integration

This guide shows how to connect ctx-sys to Claude Desktop using the Model Context Protocol (MCP).

## Prerequisites

- ctx-sys installed (`npm install -g ctx-sys`)
- Claude Desktop installed
- A project initialized with ctx-sys

## Setup Steps

### 1. Locate Claude Desktop Config

Find your Claude Desktop configuration file:

- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
- **Linux**: `~/.config/Claude/claude_desktop_config.json`

### 2. Add ctx-sys Server

Edit the configuration file and add ctx-sys to the `mcpServers` section:

```json
{
  "mcpServers": {
    "ctx-sys": {
      "command": "ctx-sys",
      "args": ["serve"],
      "env": {}
    }
  }
}
```

### 3. Restart Claude Desktop

Close and reopen Claude Desktop for the changes to take effect.

### 4. Verify Connection

In Claude Desktop, you should see ctx-sys tools available. Try asking:

> "What files are in this project?"

Claude should use ctx-sys to answer based on your indexed codebase.

## Available Tools

Once connected, Claude has access to all ctx-sys MCP tools:

| Tool | Description |
|------|-------------|
| `context_query` | Search the codebase with hybrid retrieval |
| `search_entities` | Find specific code entities (functions, classes) |
| `search_decisions` | Find past decisions and their context |
| `index_codebase` | Index the full codebase |
| `sync_from_git` | Incrementally update from git changes |
| `index_document` | Index a specific document |
| `get_index_status` | Check indexing status |
| `query_graph` | Traverse the relationship graph |
| `get_graph_stats` | Get graph statistics |
| `store_message` | Store a conversation message |
| `get_history` | Get conversation history |
| `checkpoint_save` | Save agent state |
| `checkpoint_load` | Restore agent state |

See the [MCP Tools Reference](/docs/api/mcp-tools) for full details.

## Example Queries

With ctx-sys connected, try these queries in Claude:

### Understanding Code

> "How does the authentication system work in this codebase?"

Claude will:
1. Search for auth-related code using hybrid search (FTS5 + semantic + graph)
2. Find related decisions
3. Expand context with parent classes and imports
4. Provide a coherent explanation with code references

### Finding Patterns

> "Show me examples of error handling in this project"

Claude will find error handling patterns across your codebase.

### Getting Context for Changes

> "I want to add a new API endpoint. What existing patterns should I follow?"

Claude will find similar endpoints and explain the conventions used.

## Troubleshooting

### "Server not found"

Ensure the config path is correct and ctx-sys is installed globally:

```bash
which ctx-sys
# Should output path like /usr/local/bin/ctx-sys
```

### "No tools available"

1. Check that your project is initialized: `ctx-sys status`
2. Restart Claude Desktop
3. Check server logs: `ctx-sys serve`

### "Context seems stale"

Re-index your project:

```bash
ctx-sys index
```

Or use git sync for incremental updates:

```bash
ctx-sys sync
```

## Tips for Best Results

1. **Be specific** - "How does the UserService handle authentication?" works better than "How does auth work?"

2. **Reference files** - "Look at src/auth/middleware.ts and explain its purpose"

3. **Ask for context** - "What decisions were made about the database schema?"

4. **Request comparisons** - "How does our error handling compare to typical patterns?"

## Next Steps

- [Configure ctx-sys](/docs/guides/configuration)
- [Learn about Graph RAG](/docs/concepts/graph-rag)
- [Troubleshooting guide](/docs/troubleshooting/common-issues)
